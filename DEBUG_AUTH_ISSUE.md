# üîç DEBUG: –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞, **–ù–û** –≤ –∞–¥–º–∏–Ω–∫–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üéØ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å localStorage

–û—Ç–∫—Ä–æ–π—Ç–µ **DevTools ‚Üí Application ‚Üí Local Storage ‚Üí http://91.107.120.48:3000**

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
session_token: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
```

**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ frontend (—Ç–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ)  
**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ backend (—Ç–æ–∫–µ–Ω –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É)

---

### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Console –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä–æ–π—Ç–µ **DevTools ‚Üí Console**

**–ò—â–∏—Ç–µ:**
```
üîê [AuthContext] Found saved token, validating...
üì° [AuthContext] Profile validation response: XXX
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**

#### ‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
‚úÖ [AuthContext] Session restored successfully!
```
‚Üí **–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!** –ü—Ä–æ–±–ª–µ–º–∞ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.

#### ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
‚ùå [AuthContext] Token invalid (status: 401)
```
‚Üí **Backend –æ—Ç–∫–ª–æ–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω**. –°–º–æ—Ç—Ä–∏—Ç–µ —à–∞–≥ 3.

#### ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
üîê [AuthContext] No saved token found
```
‚Üí **–¢–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**. –°–º–æ—Ç—Ä–∏—Ç–µ —à–∞–≥ 4.

---

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend (–µ—Å–ª–∏ status: 401)

Backend –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω—è—Ç—å —Ç–æ–∫–µ–Ω –ø–æ 3 –ø—Ä–∏—á–∏–Ω–∞–º:

#### A) Backend –ù–ï –¥–µ–ø–ª–æ–µ–Ω (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ expires_at)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ssh root@91.107.120.48
grep -n "–ü–†–û–í–ï–†–ö–ê expires_at" /root/cyberhub-backend/src/index.ts
```

**–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:**
```
161:   // üî• –ü–†–û–í–ï–†–ö–ê expires_at
```

**–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç** ‚Üí –Ω—É–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å backend!

```bash
scp /backend_reference/index.ts root@91.107.120.48:/root/cyberhub-backend/src/index.ts
ssh root@91.107.120.48 "cd /root/cyberhub-backend && docker-compose restart cyberhub_api"
```

#### B) –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫ (expires_at < Date.now())

**–†–µ—à–µ–Ω–∏–µ:** –í–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ (—Ç–æ–∫–µ–Ω –∂–∏–≤–µ—Ç 24 —á–∞—Å–∞)

#### C) –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ç–µ—Ä—è–ª–∞ —Å–µ—Å—Å–∏—é

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ssh root@91.107.120.48
docker exec -it cyberhub_api node -e "
const sqlite3 = require('sqlite3');
const db = new sqlite3.Database('cyberhub.db');
db.all('SELECT * FROM sessions', [], (err, rows) => {
  console.log('Sessions:', rows);
});
"
```

**–ï—Å–ª–∏ —Å–µ—Å—Å–∏–π –Ω–µ—Ç** ‚Üí –±–∞–∑–∞ –±—ã–ª–∞ –æ—á–∏—â–µ–Ω–∞, –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ.

---

### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç –≤ localStorage)

–û—Ç–∫—Ä–æ–π—Ç–µ **DevTools ‚Üí Console** –∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.

**–ò—â–∏—Ç–µ:**
```
‚úÖ [AuthContext] Login successful!
üîë [AuthContext] Session token: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```
localStorage.getItem('session_token')
```

**–ï—Å–ª–∏ `null`** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ `setSessionToken()` –≤ `/src/config/api.ts`

---

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–µ–ø–ª–æ–π backend (–µ—Å–ª–∏ –Ω–µ –¥–µ–ø–ª–æ–µ–Ω)

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π backend
scp /backend_reference/index.ts root@91.107.120.48:/root/cyberhub-backend/src/index.ts

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
ssh root@91.107.120.48 "cd /root/cyberhub-backend && docker-compose restart cyberhub_api"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
ssh root@91.107.120.48 "docker logs --tail 50 cyberhub_api"
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—á–∏—Å—Ç–∏—Ç—å localStorage –∏ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ

```javascript
// –í –±—Ä–∞—É–∑–µ—Ä–µ DevTools ‚Üí Console
localStorage.clear();
location.reload();
```

–ó–∞—Ç–µ–º –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∑–∞–Ω–æ–≤–æ.

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü–æ—Å–ª–µ —Ñ–∏–∫—Å–∞ –¥–µ–ª–∞–µ–º:

1. ‚úÖ –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `localStorage.getItem('session_token')` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
4. ‚úÖ –î–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º ‚úÖ

---

## üìä CHECKLIST

- [ ] –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ?
- [ ] Backend –¥–µ–ø–ª–æ–µ–Ω (–µ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "üî• –ü–†–û–í–ï–†–ö–ê expires_at")?
- [ ] –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–∫–µ–Ω —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ localStorage?
- [ ] Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK –¥–ª—è `/api/profile` —Å —Ç–æ–∫–µ–Ω–æ–º?
- [ ] –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º?

---

## üéØ –í–ï–†–û–Ø–¢–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê

**99% - backend –ù–ï –¥–µ–ø–ª–æ–µ–Ω!**

–í—ã –∏–∑–º–µ–Ω–∏–ª–∏ `/backend_reference/index.ts`, –Ω–æ –ù–ï —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –µ–≥–æ –Ω–∞ VDS.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
scp /backend_reference/index.ts root@91.107.120.48:/root/cyberhub-backend/src/index.ts
ssh root@91.107.120.48 "cd /root/cyberhub-backend && docker-compose restart cyberhub_api"
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å—ë –¥–æ–ª–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å! üöÄ
